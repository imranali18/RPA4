

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Lecture 24 — Advanced Python Topics and Functional Programming &mdash; RPA  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../',
              VERSION:'',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Lecture 24 — Exercises" href="lec24_functional_exercises/exercises.html" />
    <link rel="prev" title="Lecture 23 — Exercises" href="lec23_recursion_exercises/exercises.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> RPA
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../calendar.html">Detailed schedule of topics for this class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../weekly_lecture_lab.html">Weekly lecture and lab schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../weekly_oh_alac.html">Weekly office hour and tutoring schedule</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../lecture_notes.html">Lecture notes and exercises</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="lec01_intro.html">Lecture 1 — Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec02_calculator.html">Lecture 2 — Python as a Calculator</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec02_calculator_exercises/exercises.html">Lecture 2 — Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec03_strings.html">Lecture 3 — Python Strings</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec03_strings_exercises/exercises.html">Lecture 3 — Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec04_modules_functions1.html">Lecture 4 — Using functions and modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec04_modules_functions1_exercises/exercises.html">Lecture 4 — Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec05_functions2.html">Lecture 5 — Python Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec05_functions2_exercises/exercises.html">Lecture 5 — Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec06_conditionals1.html">Lecture 6 — Decisions Part 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec06_conditionals1_exercises/exercises.html">Lecture 6 — Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec07_modules_images.html">Lecture 7 — Tuples, Modules, and Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec07_modules_images_exercises/exercises.html">Lecture 7 — Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec08_lists1.html">Lecture 8 — Lists Part 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec08_lists1_exercises/exercises.html">Lecture 8 — Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec09_loops1_while.html">Lecture 9 — While Loops</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec09_loops1_while_exercises/exercises.html">Lecture 9 — Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec10_lists2.html">Lecture 10 — Lists Part 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec10_lists2_exercises/exercises.html">Lecture 10 — Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec11_conditionals2.html">Lecture 11 — Decisions Part 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec11_conditionals_exercises/exercises.html">Lecture 11 — Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec12_loops2_for_double.html">Lecture 12 — Controlling Loops</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec12_loops2_exercises/exercises.html">Lecture 12 — Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec13_files_web.html">Lecture 13 — Data from Files and Web Pages</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec13_files_exercises/exercises.html">Lecture 13 — Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec14_design_part1.html">Lecture 14 — Problem Solving and Design, Part 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec15_sets.html">Lecture 15 — Sets</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec15_sets_exercises/exercises.html">Lecture 15 — Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec16_dictionaries1.html">Lecture 16 — Dictionaries, Part 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec16_dictionaries1_exercises/exercises.html">Lecture 16 — Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec17_dictionaries2.html">Lecture 17 — Dictionaries, Part 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec17_dictionaries2_exercises/exercises.html">Lecture 17 — Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec18_classes1.html">Lecture 18 — Classes, Part 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec18_classes1_exercises/exercises.html">Lecture 18 — Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec19_classes2.html">Lecture 19 — Classes, Part 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec19_classes2_exercises/exercises.html">Lecture 19 — Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec20_searching.html">Lecture 20 — Searching</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec20_searching_exercises/exercises.html">Lecture 20 — Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec21_sorting.html">Lecture 21 — Sorting</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec21_sorting_exercises/exercises.html">Lecture 21 — Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec22_tkinter.html">Lecture 22 — TKInter</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec22_tkinter_exercises/exercises.html">Lecture 22 — Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec23_recursion.html">Lecture 23 — Recursion</a></li>
<li class="toctree-l2"><a class="reference internal" href="lec23_recursion_exercises/exercises.html">Lecture 23 — Exercises</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Lecture 24 — Advanced Python Topics and Functional Programming</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#problems-we-would-like-to-solve">Problems We Would Like to Solve</a></li>
<li class="toctree-l3"><a class="reference internal" href="#solution-techniques">Solution Techniques</a></li>
<li class="toctree-l3"><a class="reference internal" href="#map-apply-a-function-to-each-element-of-a-list">Map: Apply a function to each element of a list</a></li>
<li class="toctree-l3"><a class="reference internal" href="#passing-functions-as-parameters">Passing Functions as Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lambda-functions-anonymous-functions">Lambda functions:  Anonymous functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#in-class-practice-problem">In-Class Practice Problem:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#filter-extract-eliminate-values-from-a-list">Filter:  Extract / eliminate values from a list</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lecture-exercises-problems-1-and-2">Lecture Exercises, Problems 1 and 2:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#passing-functions-to-sort">Passing Functions to Sort</a></li>
<li class="toctree-l3"><a class="reference internal" href="#practice-problem">Practice Problem</a></li>
<li class="toctree-l3"><a class="reference internal" href="#list-comprehensions">List Comprehensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#exercises">Exercises</a></li>
<li class="toctree-l3"><a class="reference internal" href="#summary-and-discussion">Summary and Discussion</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="lec24_functional_exercises/exercises.html">Lecture 24 — Exercises</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../class_code.html">Code written in class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python_environment.html">Software installation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">RPA</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../lecture_notes.html">Lecture Notes</a> &raquo;</li>
        
      <li>Lecture 24 — Advanced Python Topics and Functional Programming</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/lecture_notes/lec24_functional.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="lecture-24-advanced-python-topics-and-functional-programming">
<h1>Lecture 24 — Advanced Python Topics and Functional Programming<a class="headerlink" href="#lecture-24-advanced-python-topics-and-functional-programming" title="Permalink to this headline">¶</a></h1>
<div class="section" id="problems-we-would-like-to-solve">
<h2>Problems We Would Like to Solve<a class="headerlink" href="#problems-we-would-like-to-solve" title="Permalink to this headline">¶</a></h2>
<p>Some of these are toy problems, but they illustrate the use of tools we would
like to develop and use:</p>
<ol class="arabic simple">
<li>How many values are in a list of lists?</li>
<li>What is the maximum distance from the origin of the points in a list?</li>
<li>What is the sum of squares of the first n integers?</li>
<li>Can you sum the positive values in a list?</li>
<li>Can you sort a list of points by y value (2nd coordinate) and then
by x value?</li>
</ol>
</div>
<div class="section" id="solution-techniques">
<h2>Solution Techniques<a class="headerlink" href="#solution-techniques" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>We can solve most of these with a <code class="docutils literal"><span class="pre">for</span></code> loop, but they can be
solved even more effectively / efficiently / compactly using
advanced Python methods.</li>
<li>Leads to notions of:</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>map and filter</li>
<li>functions as parameters</li>
<li>lambda functions</li>
<li>stable sort</li>
<li>list comprehensions</li>
</ul>
</div></blockquote>
<ul class="simple">
<li>Most are examples of <em>functional programming</em>.</li>
</ul>
</div>
<div class="section" id="map-apply-a-function-to-each-element-of-a-list">
<h2>Map: Apply a function to each element of a list<a class="headerlink" href="#map-apply-a-function-to-each-element-of-a-list" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Suppose we want to count the number of values in a list of lists.
We can use <code class="docutils literal"><span class="pre">map</span></code> to apply the <a class="reference external" href="https://docs.python.org/3/library/functions.html#len" title="(in Python v3.7)"><code class="xref py py-func docutils literal"><span class="pre">len()</span></code></a> function to each sublist:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">19</span><span class="p">],</span> <span class="p">[</span><span class="mi">23</span><span class="p">,</span> <span class="mi">29</span><span class="p">],</span> <span class="p">[</span><span class="mi">31</span><span class="p">,</span> <span class="mi">37</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">len</span><span class="p">,</span> <span class="n">v</span><span class="p">)))</span>
<span class="go">[4, 4, 2, 2]</span>
</pre></div>
</div>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">map</span></code> is an <em>iterator</em> class:</p>
<ul class="simple">
<li>It produces values in a sequence, one after another, by applying
the function (1st argument) to the values of the second argument.</li>
<li>Technically, an iterator class is one that has the <code class="docutils literal"><span class="pre">__next__</span></code>
method implemented (correctly).</li>
<li>Using <code class="xref py py-func docutils literal"><span class="pre">list()</span></code> gives us the list of lengths of the sublists
explicitly.</li>
</ul>
</li>
<li><p class="first">To complete the solution we need to just apply sum:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">len</span><span class="p">,</span> <span class="n">v</span><span class="p">)))</span>
<span class="go">12</span>
</pre></div>
</div>
<p>Notice that this does not explicitly form an intermediate list.</p>
</li>
</ul>
</div>
<div class="section" id="passing-functions-as-parameters">
<h2>Passing Functions as Parameters<a class="headerlink" href="#passing-functions-as-parameters" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">The above example passes the <a class="reference external" href="https://docs.python.org/3/library/functions.html#len" title="(in Python v3.7)"><code class="xref py py-func docutils literal"><span class="pre">len()</span></code></a> function as an argument!</p>
<ul class="simple">
<li>We also passed functions as arguments to our callbacks in our GUI
programs.</li>
</ul>
</li>
<li><p class="first">This illustrates the concept that Python treats function as
“first-class” objects - in other words functions can be used just
like variables and other data.</p>
<ul class="simple">
<li>What’s passed as an argument to <a class="reference external" href="https://docs.python.org/3/library/functions.html#map" title="(in Python v3.7)"><code class="xref py py-func docutils literal"><span class="pre">map()</span></code></a> is the location of
the function code.</li>
</ul>
</li>
<li><p class="first">Now suppose we want to find the maximum distance of a list of points
from the origin.  Here, we’ll have to write a function:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">dist2D</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="mf">0.5</span>

<span class="n">pts</span> <span class="o">=</span> <span class="p">[(</span><span class="mf">4.5</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mf">2.1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mf">6.8</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mf">1.4</span><span class="p">,</span> <span class="mf">2.9</span><span class="p">)]</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">dist2D</span><span class="p">,</span> <span class="n">pts</span><span class="p">)))</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="lambda-functions-anonymous-functions">
<h2>Lambda functions:  Anonymous functions<a class="headerlink" href="#lambda-functions-anonymous-functions" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">We can avoid the need to write a separate function here by writing an
<em>anonymous</em> function called a <em>lambda</em> function.</p>
</li>
<li><p class="first">Our first example is just squaring the values of a list:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]))</span>
<span class="go">[1, 4, 9, 16]</span>
</pre></div>
</div>
</li>
<li><p class="first">Now, we can sum the squares from 1 to n:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">=</span> <span class="mi">100</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sum</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)))</span>
</pre></div>
</div>
</li>
<li><p class="first">We can also implement the <code class="xref py py-func docutils literal"><span class="pre">dist2D()</span></code> function anonymously:</p>
</li>
</ul>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">max</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">pts</span><span class="p">))</span>
<span class="go">7.432361670424818</span>
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li>Notice that we did not need to explicitly form a list in each of
the preceding examples. This leads to substantial savings when
the list is large!</li>
<li>Aside: the notion of a lambda function goes all the way back to
the origin of computer science.</li>
</ul>
</div>
<div class="section" id="in-class-practice-problem">
<h2>In-Class Practice Problem:<a class="headerlink" href="#in-class-practice-problem" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Starting with the following list of (x, y) point coordinate types, we
will use <a class="reference external" href="https://docs.python.org/3/library/functions.html#map" title="(in Python v3.7)"><code class="xref py py-func docutils literal"><span class="pre">map()</span></code></a>, a lambda function, and <a class="reference external" href="https://docs.python.org/3/library/functions.html#max" title="(in Python v3.7)"><code class="xref py py-func docutils literal"><span class="pre">max()</span></code></a> to find the
maximum x coordinate (the 0-th coordinate) in a list of points.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pts</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">6</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mf">7.5</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mf">4.4</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="filter-extract-eliminate-values-from-a-list">
<h2>Filter:  Extract / eliminate values from a list<a class="headerlink" href="#filter-extract-eliminate-values-from-a-list" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Consider a different problem:  how to eliminate all of the negative
values from a list.  Based on what we know so far, this requires a
<code class="docutils literal"><span class="pre">for</span></code> loop with <code class="xref py py-func docutils literal"><span class="pre">append()</span></code>.</p>
</li>
<li><p class="first">We can simplify this using the built-in Python construct
called <code class="docutils literal"><span class="pre">filter</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
<span class="go">[1, 9, 10]</span>
</pre></div>
</div>
</li>
<li><p class="first">Here:</p>
<ul class="simple">
<li>The lambda function must produce a boolean value and if that
value is <code class="docutils literal"><span class="pre">True</span></code> the list item is kept; otherwise it is
eliminated.</li>
<li>The result of <code class="docutils literal"><span class="pre">filter</span></code> is an iterator object, just like the
result of <code class="docutils literal"><span class="pre">map</span></code> is. We convert to a list in order to display
the answer.</li>
</ul>
</li>
<li><p class="first">If we want to sum up the non-negative values, then we don’t need to
explicitly generate a list:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">sum</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
<span class="go">20</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="lecture-exercises-problems-1-and-2">
<h2>Lecture Exercises, Problems 1 and 2:<a class="headerlink" href="#lecture-exercises-problems-1-and-2" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>At this point students will be given the chance to work on the
first two lecture exercises.</li>
</ul>
</div>
<div class="section" id="passing-functions-to-sort">
<h2>Passing Functions to Sort<a class="headerlink" href="#passing-functions-to-sort" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Consider the problem of sorting a list of (x, y) points by their y
values first and their x values for tied y values, both in
decreasing order.  For example, given:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pts</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> \
          <span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>
</pre></div>
</div>
<p>we’d like the sorted order to be:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> \
     <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
</pre></div>
</div>
</li>
<li><p class="first">The Python sort function:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span> <span class="nb">sorted</span><span class="p">(</span><span class="n">pts</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">[(14, 10), (12, 10), (12, 3), (12, 1), (8, 12), (6, 5), \</span>
<span class="go">    (5, 3), (2, 5)]</span>
</pre></div>
</div>
<p>gives the ordering by x value and then by y value. This is not what
we want.</p>
</li>
<li><p class="first">The first step to a solution is to provide a <em>key</em> function to
<a class="reference external" href="https://docs.python.org/3/library/functions.html#sorted" title="(in Python v3.7)"><code class="xref py py-func docutils literal"><span class="pre">sorted()</span></code></a> to pull out the information (the y value in this
case) from each tuple to use as the basis for sorting:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">pts</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">[(8, 12), (14, 10), (12, 10), (2, 5), (6, 5), (12, 3), \</span>
<span class="go">    (5, 3), (12, 1)]</span>
</pre></div>
</div>
<p>This is close but not quite right because the two points with y=5
are out of order.</p>
</li>
<li><p class="first">The trick is to sort by x first and then sort by y!</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">by_x</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">pts</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">by_x</span>
<span class="go">[(14, 10), (12, 10), (12, 3), (12, 1), (8, 12), (6, 5), \</span>
<span class="go">   (5, 3), (2, 5)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">by_x</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">[(8, 12), (14, 10), (12, 10), (6, 5), (2, 5), (12, 3), \</span>
<span class="go">   (5, 3), (12, 1)]</span>
</pre></div>
</div>
</li>
<li><p class="first">This works because <a class="reference external" href="https://docs.python.org/3/library/functions.html#sorted" title="(in Python v3.7)"><code class="xref py py-func docutils literal"><span class="pre">sorted()</span></code></a> uses what’s known as a <em>stable
sort</em>:  when two values are “tied” according to the
sorting criteria (y value in the second sort) their relative
ordering (by x value from the first sort) in the final list is preserved.</p>
<ul class="simple">
<li>Therefore, (6, 5) comes earlier than (2, 5), while (12, 3) comes
earlier than (5, 3).</li>
</ul>
</li>
<li><p class="first">A number of variations on sorting use this “stable sort” property,
but not all fast sorting algorithms are stable.</p>
</li>
<li><p class="first">Of course, we can also extend our lambda to reverse the tuple provided to sort().</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">pts</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="p">[(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> \
   <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="practice-problem">
<h2>Practice Problem<a class="headerlink" href="#practice-problem" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Use <code class="docutils literal"><span class="pre">filter</span></code> to eliminate all words that are shorter than 4
letters from a list of words.</li>
</ol>
</div>
<div class="section" id="list-comprehensions">
<h2>List Comprehensions<a class="headerlink" href="#list-comprehensions" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Instead of <code class="docutils literal"><span class="pre">map</span></code> and <code class="docutils literal"><span class="pre">filter</span></code> some people prefer another example
of functional programming in Python called <em>list comprehensions</em>.</p>
</li>
<li><p class="first">Here is an example to generate a list of the squares of the first n integers:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">=</span> <span class="mi">8</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">i</span> <span class="o">*</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span>
<span class="go">[1, 4, 9, 16, 25, 36, 49, 64]</span>
</pre></div>
</div>
</li>
<li><p class="first">The form of this is an expression followed by a <code class="docutils literal"><span class="pre">for</span></code> loop
statement.</p>
</li>
<li><p class="first">We can get the effect of <code class="docutils literal"><span class="pre">filter</span></code> by adding a conditional at the
end:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">v</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
<span class="go">[1, 9, 10]</span>
</pre></div>
</div>
</li>
<li><p class="first">Here, the values are only generated in the resultant list when the
<code class="docutils literal"><span class="pre">if</span></code> condition passes.</p>
</li>
<li><p class="first">We can combine these as well.  As a slightly silly example, we can
eliminate the negative values and square the positive values:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">v</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
<span class="go">[1, 81, 100]</span>
</pre></div>
</div>
</li>
<li><p class="first">We can get even more sophisticated by nesting <code class="docutils literal"><span class="pre">for</span></code> loops. Here is
an example where we generate all pairs of numbers between 1 and 4,
except for the pairs where the numbers are equal:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">[(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="n">j</span><span class="p">]</span>
<span class="go">[(1, 2), (1, 3), (1, 4), (2, 1), (2, 3), (2, 4), (3, 1), (3, 2),</span>
<span class="go">    (3, 4), (4, 1), (4, 2), (4, 3)]</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="exercises">
<h2>Exercises<a class="headerlink" href="#exercises" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Write a list comprehension statement to generate a list of all
pairs of odd positive integer values less than 10 where the first value is
less than the second value.</li>
</ol>
</div>
<div class="section" id="summary-and-discussion">
<h2>Summary and Discussion<a class="headerlink" href="#summary-and-discussion" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>We’ve explored programming that is more compact and at a higher
level of abstraction. It can be used to effectively interact with
data.</li>
<li><code class="docutils literal"><span class="pre">map</span></code> and <code class="docutils literal"><span class="pre">filter</span></code> each take a function and a sequence (an
“iterable”) as arguments and produce an iterator as a result:<ul>
<li><code class="docutils literal"><span class="pre">map</span></code> produces the result of applying the function to each element
of the iterable.</li>
<li><code class="docutils literal"><span class="pre">filter</span></code> produces each element of the iterable for which the
function returns <code class="docutils literal"><span class="pre">True</span></code>.</li>
</ul>
</li>
<li>Both <code class="docutils literal"><span class="pre">map</span></code> and <code class="docutils literal"><span class="pre">filter</span></code> are made more compact by using
lambda functions.</li>
<li>Lambda functions can also be used to change the result of
sorting.</li>
<li>A <em>stable sort</em> preserves the relative order of “tied” values.</li>
<li><em>List comprehensions</em> can be used in place of <code class="docutils literal"><span class="pre">map</span></code> and
<code class="docutils literal"><span class="pre">filter</span></code>:<ul>
<li>Some people prefer list comprehensions because they often do not
require lambda functions, but…</li>
<li>List comprehensions explicitly construct the list of results rather than
generating them one-by-one, which is what <code class="docutils literal"><span class="pre">map</span></code> and <code class="docutils literal"><span class="pre">filter</span></code>
do.  This makes them less efficient for large data sets.</li>
</ul>
</li>
<li>These are all examples of <em>functional programming</em>.</li>
<li>We’ve also used other major programming paradigms this semester:<ul>
<li><em>imperative programming</em></li>
<li><em>object oriented programming</em></li>
</ul>
</li>
<li>Many modern languages like Python provide tools that allow
programming using a combination of paradigms.</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="lec24_functional_exercises/exercises.html" class="btn btn-neutral float-right" title="Lecture 24 — Exercises" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="lec23_recursion_exercises/exercises.html" class="btn btn-neutral float-left" title="Lecture 23 — Exercises" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Imran Ali

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>